<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventaire Camion - √âquipes</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .user-info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .settings-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.3em;
            transition: all 0.3s;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .settings-btn:hover {
            background: rgba(255,255,255,0.4);
            transform: rotate(45deg);
        }

        .logout-btn {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.5);
        }

        .content {
            padding: 30px;
        }

        /* Login/Register Screen */
        .auth-container {
            max-width: 450px;
            margin: 50px auto;
            padding: 40px;
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
        }

        .auth-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-weight: 600;
            color: #999;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .auth-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            padding: 12px 25px;
            font-size: 14px;
        }

        .btn-danger {
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            font-size: 14px;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .search-bar {
            margin-bottom: 30px;
        }

        .search-bar input {
            width: 100%;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .add-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .add-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .filters {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn:hover {
            background: #667eea;
            color: white;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .item-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .item-title {
            font-size: 1.3em;
            color: #333;
            font-weight: 700;
        }

        .item-category {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .item-details {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .item-details p {
            margin-bottom: 8px;
        }

        .item-details strong {
            color: #333;
        }

        .item-actions {
            display: flex;
            justify-content: flex-end;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .category-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #667eea;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .category-badge button {
            background: rgba(255,255,255,0.3);
            border: none;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
            line-height: 1;
            transition: all 0.2s;
        }

        .category-badge button:hover {
            background: rgba(255,255,255,0.5);
        }

        .photo-preview-img {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .item-photo {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .item-photo:hover {
            transform: scale(1.05);
        }

        .photo-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .photo-modal.active {
            display: flex;
        }

        .photo-modal img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .photo-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            color: #333;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        input[type="file"] {
            padding: 10px;
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        input[type="file"]:hover {
            border-color: #667eea;
            background: #f8f9fa;
        }

        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1500;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .edit-modal.active {
            display: flex;
        }

        .edit-modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .edit-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .edit-modal-header h2 {
            margin: 0;
            color: #333;
        }

        .edit-modal-close {
            background: #e0e0e0;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .edit-modal-close:hover {
            background: #d0d0d0;
        }

        .edit-modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .edit-modal-actions .btn {
            flex: 1;
        }

        .settings-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 1500;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow-y: auto;
        }

        .settings-modal.active {
            display: flex;
        }

        .settings-modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .settings-section {
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 2px solid #f0f0f0;
        }

        .settings-section:last-child {
            border-bottom: none;
        }

        .settings-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .settings-option {
            margin-bottom: 20px;
        }

        .settings-option label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .color-picker-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-picker {
            width: 60px;
            height: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
        }

        .color-preset {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-preset:hover {
            border-color: #333;
            transform: scale(1.1);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #667eea;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .alert-badge {
            background: #e74c3c;
            color: white;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
            margin-left: 8px;
        }

        .low-stock-warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 5px;
            color: #856404;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #667eea;
            font-size: 1.2em;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s steps(4, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .error-message {
            background: #ffe6e6;
            color: #c0392b;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #e74c3c;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .inventory-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .user-info {
                position: static;
                margin-top: 20px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Authentication Screen -->
        <div id="authScreen">
            <div class="header">
                <h1>üöõ Inventaire Camion</h1>
                <p>Syst√®me multi-√©quipes s√©curis√©</p>
            </div>
            
            <div class="auth-container">
                <div class="auth-tabs">
                    <div class="auth-tab active" data-tab="login">Se connecter</div>
                    <div class="auth-tab" data-tab="register">Cr√©er une √©quipe</div>
                </div>

                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail">Email de l'√©quipe</label>
                        <input type="email" id="loginEmail" required placeholder="equipe@example.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Mot de passe</label>
                        <input type="password" id="loginPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button type="submit" class="btn btn-primary">Se connecter</button>
                </form>

                <!-- Register Form -->
                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label for="registerTeamName">Nom de l'√©quipe</label>
                        <input type="text" id="registerTeamName" required placeholder="√âquipe A">
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" required placeholder="equipe@example.com">
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Mot de passe</label>
                        <input type="password" id="registerPassword" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                    </div>
                    <div class="form-group">
                        <label for="registerPasswordConfirm">Confirmer le mot de passe</label>
                        <input type="password" id="registerPasswordConfirm" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6">
                    </div>
                    <button type="submit" class="btn btn-primary">Cr√©er l'√©quipe</button>
                </form>

                <div id="authError" class="error-message" style="display: none;"></div>
            </div>
        </div>

        <!-- Main App Screen -->
        <div id="appScreen" style="display: none;">
            <div class="header">
                <button class="settings-btn" onclick="openSettings()">‚öôÔ∏è</button>
                <h1>üöõ Inventaire Camion</h1>
                <p id="teamNameDisplay">√âquipe</p>
                <div class="user-info">
                    <span id="userEmailDisplay"></span>
                    <button class="logout-btn" onclick="logout()">D√©connexion</button>
                </div>
            </div>

            <div class="content">
                <div id="loadingState" class="loading">Chargement de votre inventaire</div>
                
                <div id="mainContent" style="display: none;">
                    <!-- Gestion des cat√©gories -->
                    <div class="add-section">
                        <h2>üè∑Ô∏è G√©rer les cat√©gories</h2>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="newCategory">Ajouter une nouvelle cat√©gorie</label>
                                <input type="text" id="newCategory" placeholder="Ex: C√¢bles, Plomberie, Peinture...">
                            </div>
                            <div class="form-group" style="display: flex; align-items: flex-end;">
                                <button type="button" class="btn btn-primary" onclick="addCategory()" style="width: 100%;">Ajouter la cat√©gorie</button>
                            </div>
                        </div>
                        <div id="categoriesList" style="margin-top: 15px; display: flex; flex-wrap: wrap; gap: 10px;">
                        </div>
                    </div>

                    <!-- Ajout d'un nouvel article -->
                    <div class="add-section">
                        <h2>‚ûï Ajouter un article</h2>
                        <form id="addItemForm">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="itemName">Nom de l'article *</label>
                                    <input type="text" id="itemName" required placeholder="Ex: Cl√© √† molette 12mm">
                                </div>
                                <div class="form-group">
                                    <label for="itemCategory">Cat√©gorie *</label>
                                    <select id="itemCategory" required>
                                        <option value="">Choisir une cat√©gorie</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="itemQuantity">Quantit√© *</label>
                                    <input type="number" id="itemQuantity" min="1" value="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="itemLocation">Emplacement</label>
                                    <input type="text" id="itemLocation" placeholder="Ex: Coffre gauche, √âtag√®re 2">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="itemNotes">Notes / Description</label>
                                <textarea id="itemNotes" placeholder="Ajoutez des d√©tails suppl√©mentaires..."></textarea>
                            </div>
                            <div class="form-group">
                                <label for="itemPhoto">Photo de l'article</label>
                                <input type="file" id="itemPhoto" accept="image/*" capture="environment">
                                <div id="photoPreview" style="margin-top: 10px;"></div>
                            </div>
                            <button type="submit" class="btn btn-primary">Ajouter √† l'inventaire</button>
                        </form>
                    </div>

                    <!-- Statistiques -->
                    <div class="stats">
                        <div class="stat-card">
                            <h3 id="totalItems">0</h3>
                            <p>Articles au total</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="totalCategories">0</h3>
                            <p>Cat√©gories</p>
                        </div>
                    </div>

                    <!-- Barre de recherche -->
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="üîç Rechercher dans l'inventaire...">
                    </div>

                    <!-- Alertes de stock -->
                    <div id="lowStockAlerts"></div>

                    <!-- Filtres -->
                    <div class="filters"></div>

                    <!-- Liste des articles -->
                    <div id="inventoryList" class="inventory-grid">
                        <div class="empty-state">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                            </svg>
                            <h3>Aucun article pour le moment</h3>
                            <p>Ajoutez votre premier article pour commencer l'inventaire</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Modal -->
    <div id="photoModal" class="photo-modal" onclick="closePhotoModal()">
        <button class="photo-modal-close" onclick="closePhotoModal()">√ó</button>
        <img id="photoModalImg" src="" alt="Photo agrandie">
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="edit-modal">
        <div class="edit-modal-content">
            <div class="edit-modal-header">
                <h2>‚úèÔ∏è Modifier l'article</h2>
                <button class="edit-modal-close" onclick="closeEditModal()">√ó</button>
            </div>
            <form id="editItemForm">
                <input type="hidden" id="editItemId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editItemName">Nom de l'article *</label>
                        <input type="text" id="editItemName" required>
                    </div>
                    <div class="form-group">
                        <label for="editItemCategory">Cat√©gorie *</label>
                        <select id="editItemCategory" required>
                            <option value="">Choisir une cat√©gorie</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editItemQuantity">Quantit√© *</label>
                        <input type="number" id="editItemQuantity" min="1" required>
                    </div>
                    <div class="form-group">
                        <label for="editItemLocation">Emplacement</label>
                        <input type="text" id="editItemLocation">
                    </div>
                </div>
                <div class="form-group">
                    <label for="editItemNotes">Notes / Description</label>
                    <textarea id="editItemNotes"></textarea>
                </div>
                <div class="form-group">
                    <label for="editItemPhoto">Changer la photo</label>
                    <input type="file" id="editItemPhoto" accept="image/*" capture="environment">
                    <div id="editPhotoPreview" style="margin-top: 10px;"></div>
                </div>
                <div class="edit-modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="settings-modal">
        <div class="settings-modal-content">
            <div class="edit-modal-header">
                <h2>‚öôÔ∏è R√©glages</h2>
                <button class="edit-modal-close" onclick="closeSettings()">√ó</button>
            </div>

            <!-- Theme Section -->
            <div class="settings-section">
                <h3>üé® Th√®me de l'interface</h3>
                
                <div class="settings-option">
                    <label>Couleur principale</label>
                    <div class="color-picker-container">
                        <input type="color" id="primaryColor" class="color-picker" value="#667eea">
                        <span style="margin-right: 10px;">Personnalis√©e</span>
                        <div class="color-preset" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" onclick="setThemePreset('#667eea', '#764ba2')" title="Violet (d√©faut)"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);" onclick="setThemePreset('#f093fb', '#f5576c')" title="Rose"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);" onclick="setThemePreset('#4facfe', '#00f2fe')" title="Bleu"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);" onclick="setThemePreset('#43e97b', '#38f9d7')" title="Vert"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);" onclick="setThemePreset('#fa709a', '#fee140')" title="Orange"></div>
                        <div class="color-preset" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);" onclick="setThemePreset('#30cfd0', '#330867')" title="Sombre"></div>
                    </div>
                </div>

                <div class="settings-option">
                    <label>Couleur secondaire</label>
                    <div class="color-picker-container">
                        <input type="color" id="secondaryColor" class="color-picker" value="#764ba2">
                    </div>
                </div>
            </div>

            <!-- Alerts Section -->
            <div class="settings-section">
                <h3>üîî Alertes de stock</h3>
                
                <div class="settings-option">
                    <label>Activer les alertes de stock bas</label>
                    <label class="toggle-switch">
                        <input type="checkbox" id="enableAlerts" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="settings-option">
                    <label for="alertThreshold">Seuil d'alerte (quantit√© minimale)</label>
                    <input type="number" id="alertThreshold" min="0" value="5" style="width: 100px; padding: 8px; border: 2px solid #e0e0e0; border-radius: 8px;">
                    <p style="color: #666; font-size: 0.9em; margin-top: 5px;">Une alerte s'affichera quand un article atteint cette quantit√© ou moins</p>
                </div>
            </div>

            <!-- Export/Import Section -->
            <div class="settings-section">
                <h3>üíæ Donn√©es</h3>
                
                <div class="settings-option">
                    <button class="btn btn-primary" onclick="exportData()">üì• Exporter l'inventaire</button>
                    <p style="color: #666; font-size: 0.9em; margin-top: 5px;">T√©l√©charger vos donn√©es en JSON</p>
                </div>
            </div>

            <div class="edit-modal-actions">
                <button type="button" class="btn btn-primary" onclick="saveSettings()">Enregistrer les r√©glages</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentUser = null;
        let inventory = [];
        let categories = [];
        let currentFilter = 'all';
        const STORAGE_KEY_PREFIX = 'team_';
        
        // Settings state
        let settings = {
            primaryColor: '#667eea',
            secondaryColor: '#764ba2',
            enableAlerts: true,
            alertThreshold: 5
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', async function() {
            // Check if user is already logged in
            const savedUser = await loadFromStorage('current_user');
            if (savedUser) {
                currentUser = savedUser;
                await loadUserData();
            }
            
            setupAuthTabs();
            setupAuthForms();
        });

        // Storage functions using window.storage API
        async function loadFromStorage(key) {
            try {
                const result = await window.storage.get(key);
                return result ? JSON.parse(result.value) : null;
            } catch (error) {
                console.error('Error loading from storage:', error);
                return null;
            }
        }

        async function saveToStorage(key, data) {
            try {
                await window.storage.set(key, JSON.stringify(data));
                return true;
            } catch (error) {
                console.error('Error saving to storage:', error);
                return false;
            }
        }

        async function loadTeamData(teamId) {
            try {
                const inventoryData = await loadFromStorage(`${STORAGE_KEY_PREFIX}${teamId}_inventory`);
                const categoriesData = await loadFromStorage(`${STORAGE_KEY_PREFIX}${teamId}_categories`);
                const settingsData = await loadFromStorage(`${STORAGE_KEY_PREFIX}${teamId}_settings`);
                
                return {
                    inventory: inventoryData || [],
                    categories: categoriesData || [
                        'Outils',
                        'Pi√®ces m√©caniques',
                        '√âlectrique',
                        'Consommables',
                        'S√©curit√©',
                        'Autre'
                    ],
                    settings: settingsData || {
                        primaryColor: '#667eea',
                        secondaryColor: '#764ba2',
                        enableAlerts: true,
                        alertThreshold: 5
                    }
                };
            } catch (error) {
                console.error('Error loading team data:', error);
                return {
                    inventory: [],
                    categories: [
                        'Outils',
                        'Pi√®ces m√©caniques',
                        '√âlectrique',
                        'Consommables',
                        'S√©curit√©',
                        'Autre'
                    ],
                    settings: {
                        primaryColor: '#667eea',
                        secondaryColor: '#764ba2',
                        enableAlerts: true,
                        alertThreshold: 5
                    }
                };
            }
        }

        async function saveTeamData() {
            if (!currentUser) return;
            
            await saveToStorage(`${STORAGE_KEY_PREFIX}${currentUser.id}_inventory`, inventory);
            await saveToStorage(`${STORAGE_KEY_PREFIX}${currentUser.id}_categories`, categories);
            await saveToStorage(`${STORAGE_KEY_PREFIX}${currentUser.id}_settings`, settings);
        }

        // Auth tab switching
        function setupAuthTabs() {
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.dataset.tab;
                    
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.auth-form').forEach(f => f.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(`${targetTab}Form`).classList.add('active');
                    
                    hideAuthError();
                });
            });
        }

        // Setup auth forms
        function setupAuthForms() {
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('registerForm').addEventListener('submit', handleRegister);
        }

        // Handle login
        async function handleLogin(e) {
            e.preventDefault();
            hideAuthError();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            // Load all users
            const users = await loadFromStorage('all_users') || {};
            
            // Find user by email
            const user = Object.values(users).find(u => u.email === email);
            
            if (!user) {
                showAuthError('Email non trouv√©. Veuillez cr√©er une √©quipe.');
                return;
            }
            
            if (user.password !== password) {
                showAuthError('Mot de passe incorrect.');
                return;
            }
            
            // Login successful
            currentUser = user;
            await saveToStorage('current_user', user);
            await loadUserData();
        }

        // Handle registration
        async function handleRegister(e) {
            e.preventDefault();
            hideAuthError();
            
            const teamName = document.getElementById('registerTeamName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            
            // Validation
            if (password !== passwordConfirm) {
                showAuthError('Les mots de passe ne correspondent pas.');
                return;
            }
            
            if (password.length < 6) {
                showAuthError('Le mot de passe doit contenir au moins 6 caract√®res.');
                return;
            }
            
            // Load existing users
            const users = await loadFromStorage('all_users') || {};
            
            // Check if email already exists
            if (Object.values(users).some(u => u.email === email)) {
                showAuthError('Cet email est d√©j√† utilis√©.');
                return;
            }
            
            // Create new user
            const userId = 'user_' + Date.now();
            const newUser = {
                id: userId,
                teamName: teamName,
                email: email,
                password: password,
                createdAt: new Date().toISOString()
            };
            
            users[userId] = newUser;
            await saveToStorage('all_users', users);
            
            // Initialize team data with default categories
            await saveToStorage(`${STORAGE_KEY_PREFIX}${userId}_inventory`, []);
            await saveToStorage(`${STORAGE_KEY_PREFIX}${userId}_categories`, [
                'Outils',
                'Pi√®ces m√©caniques',
                '√âlectrique',
                'Consommables',
                'S√©curit√©',
                'Autre'
            ]);
            
            // Login the new user
            currentUser = newUser;
            await saveToStorage('current_user', newUser);
            await loadUserData();
            
            showNotification('√âquipe cr√©√©e avec succ√®s !');
        }

        // Load user data and show app
        async function loadUserData() {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('appScreen').style.display = 'block';
            document.getElementById('loadingState').style.display = 'block';
            document.getElementById('mainContent').style.display = 'none';
            
            // Display user info
            document.getElementById('teamNameDisplay').textContent = currentUser.teamName;
            document.getElementById('userEmailDisplay').textContent = currentUser.email;
            
            // Load team data
            const teamData = await loadTeamData(currentUser.id);
            inventory = teamData.inventory;
            categories = teamData.categories;
            settings = teamData.settings;
            
            // Apply theme
            applyTheme();
            
            // Initialize UI
            setTimeout(() => {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('mainContent').style.display = 'block';
                
                renderCategories();
                updateCategorySelect();
                updateFilterButtons();
                renderInventory();
                updateStats();
                checkLowStock();
                setupInventoryHandlers();
            }, 1000);
        }

        // Logout
        async function logout() {
            if (confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ?')) {
                await saveToStorage('current_user', null);
                currentUser = null;
                inventory = [];
                categories = [];
                
                document.getElementById('appScreen').style.display = 'none';
                document.getElementById('authScreen').style.display = 'block';
                
                // Reset forms
                document.getElementById('loginForm').reset();
                document.getElementById('registerForm').reset();
            }
        }

        // Setup inventory event handlers
        function setupInventoryHandlers() {
            document.getElementById('addItemForm').addEventListener('submit', handleAddItem);
            document.getElementById('editItemForm').addEventListener('submit', handleEditItem);
            document.getElementById('searchInput').addEventListener('input', function(e) {
                renderInventory(e.target.value);
            });
            
            // Photo preview for add form
            document.getElementById('itemPhoto').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const preview = document.getElementById('photoPreview');
                        preview.innerHTML = `<img src="${event.target.result}" class="photo-preview-img" alt="Aper√ßu">`;
                    };
                    reader.readAsDataURL(file);
                }
            });

            // Photo preview for edit form
            document.getElementById('editItemPhoto').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const preview = document.getElementById('editPhotoPreview');
                        preview.innerHTML = `<img src="${event.target.result}" class="photo-preview-img" alt="Aper√ßu">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Add item
        async function handleAddItem(e) {
            e.preventDefault();
            
            // Get photo if uploaded
            let photoData = null;
            const photoInput = document.getElementById('itemPhoto');
            if (photoInput.files && photoInput.files[0]) {
                const file = photoInput.files[0];
                photoData = await new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (event) => resolve(event.target.result);
                    reader.readAsDataURL(file);
                });
            }
            
            const newItem = {
                id: Date.now(),
                name: document.getElementById('itemName').value,
                category: document.getElementById('itemCategory').value,
                quantity: parseInt(document.getElementById('itemQuantity').value),
                location: document.getElementById('itemLocation').value,
                notes: document.getElementById('itemNotes').value,
                photo: photoData,
                dateAdded: new Date().toLocaleDateString('fr-FR')
            };

            inventory.push(newItem);
            await saveTeamData();
            renderInventory();
            updateStats();
            checkLowStock();
            
            e.target.reset();
            document.getElementById('photoPreview').innerHTML = '';
            showNotification('Article ajout√© avec succ√®s!');
        }

        // Add category
        async function addCategory() {
            const input = document.getElementById('newCategory');
            const categoryName = input.value.trim();
            
            if (!categoryName) {
                alert('Veuillez entrer un nom de cat√©gorie');
                return;
            }
            
            if (categories.includes(categoryName)) {
                alert('Cette cat√©gorie existe d√©j√†');
                return;
            }
            
            categories.push(categoryName);
            await saveTeamData();
            renderCategories();
            updateCategorySelect();
            updateFilterButtons();
            input.value = '';
            showNotification('Cat√©gorie ajout√©e !');
        }

        // Delete category
        async function deleteCategory(categoryName) {
            const itemsWithCategory = inventory.filter(item => item.category === categoryName);
            
            if (itemsWithCategory.length > 0) {
                if (!confirm(`${itemsWithCategory.length} article(s) utilisent cette cat√©gorie. Voulez-vous vraiment la supprimer ? Les articles seront d√©plac√©s vers "Autre".`)) {
                    return;
                }
                inventory.forEach(item => {
                    if (item.category === categoryName) {
                        item.category = 'Autre';
                    }
                });
            }
            
            categories = categories.filter(cat => cat !== categoryName);
            await saveTeamData();
            renderCategories();
            updateCategorySelect();
            updateFilterButtons();
            renderInventory();
            showNotification('Cat√©gorie supprim√©e');
        }

        // Delete item
        async function deleteItem(id) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer cet article?')) {
                inventory = inventory.filter(item => item.id !== id);
                await saveTeamData();
                renderInventory();
                updateStats();
                checkLowStock();
                showNotification('Article supprim√©');
            }
        }

        // Edit item
        function editItem(id) {
            const item = inventory.find(i => i.id === id);
            if (!item) return;

            // Populate edit form
            document.getElementById('editItemId').value = item.id;
            document.getElementById('editItemName').value = item.name;
            document.getElementById('editItemCategory').value = item.category;
            document.getElementById('editItemQuantity').value = item.quantity;
            document.getElementById('editItemLocation').value = item.location || '';
            document.getElementById('editItemNotes').value = item.notes || '';

            // Update category select in edit form
            const editSelect = document.getElementById('editItemCategory');
            editSelect.innerHTML = '<option value="">Choisir une cat√©gorie</option>' +
                categories.map(cat => `<option value="${cat}" ${cat === item.category ? 'selected' : ''}>${cat}</option>`).join('');

            // Show existing photo if any
            const editPhotoPreview = document.getElementById('editPhotoPreview');
            if (item.photo) {
                editPhotoPreview.innerHTML = `<img src="${item.photo}" class="photo-preview-img" alt="Photo actuelle">`;
            } else {
                editPhotoPreview.innerHTML = '';
            }

            // Show modal
            document.getElementById('editModal').classList.add('active');
        }

        // Handle edit form submission
        async function handleEditItem(e) {
            e.preventDefault();

            const itemId = parseInt(document.getElementById('editItemId').value);
            const itemIndex = inventory.findIndex(i => i.id === itemId);
            
            if (itemIndex === -1) return;

            // Get new photo if uploaded
            let photoData = inventory[itemIndex].photo; // Keep existing photo by default
            const photoInput = document.getElementById('editItemPhoto');
            if (photoInput.files && photoInput.files[0]) {
                const file = photoInput.files[0];
                photoData = await new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (event) => resolve(event.target.result);
                    reader.readAsDataURL(file);
                });
            }

            // Update item
            inventory[itemIndex] = {
                ...inventory[itemIndex],
                name: document.getElementById('editItemName').value,
                category: document.getElementById('editItemCategory').value,
                quantity: parseInt(document.getElementById('editItemQuantity').value),
                location: document.getElementById('editItemLocation').value,
                notes: document.getElementById('editItemNotes').value,
                photo: photoData
            };

            await saveTeamData();
            renderInventory();
            updateStats();
            checkLowStock();
            closeEditModal();
            showNotification('Article modifi√© avec succ√®s!');
        }

        // Close edit modal
        function closeEditModal() {
            document.getElementById('editModal').classList.remove('active');
            document.getElementById('editItemForm').reset();
            document.getElementById('editPhotoPreview').innerHTML = '';
        }

        // Render categories
        function renderCategories() {
            const categoriesList = document.getElementById('categoriesList');
            categoriesList.innerHTML = categories.map(cat => `
                <div class="category-badge">
                    ${cat}
                    <button onclick="deleteCategory('${cat.replace(/'/g, "\\'")}')">√ó</button>
                </div>
            `).join('');
        }

        // Update category select
        function updateCategorySelect() {
            const select = document.getElementById('itemCategory');
            select.innerHTML = '<option value="">Choisir une cat√©gorie</option>' +
                categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');
        }

        // Update filter buttons
        function updateFilterButtons() {
            const filtersDiv = document.querySelector('.filters');
            filtersDiv.innerHTML = `
                <button class="filter-btn ${currentFilter === 'all' ? 'active' : ''}" data-filter="all">Tout</button>
                ${categories.map(cat => `
                    <button class="filter-btn ${currentFilter === cat ? 'active' : ''}" data-filter="${cat}">${cat}</button>
                `).join('')}
            `;
            
            filtersDiv.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    filtersDiv.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.dataset.filter;
                    renderInventory();
                });
            });
        }

        // Render inventory
        function renderInventory(searchTerm = '') {
            const inventoryList = document.getElementById('inventoryList');
            
            let filteredItems = inventory;

            if (currentFilter !== 'all') {
                filteredItems = filteredItems.filter(item => item.category === currentFilter);
            }

            if (searchTerm) {
                filteredItems = filteredItems.filter(item => 
                    item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.category.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.location.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    item.notes.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }

            if (filteredItems.length === 0) {
                inventoryList.innerHTML = `
                    <div class="empty-state">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                        <h3>Aucun article trouv√©</h3>
                        <p>${searchTerm ? 'Essayez une autre recherche' : 'Ajoutez votre premier article'}</p>
                    </div>
                `;
                return;
            }

            inventoryList.innerHTML = filteredItems.map(item => `
                <div class="item-card">
                    ${item.photo ? `<img src="${item.photo}" class="item-photo" alt="${item.name}" onclick="openPhotoModal('${item.photo}')">` : ''}
                    <div class="item-header">
                        <div class="item-title">${item.name}</div>
                        <div class="item-category">${item.category}</div>
                    </div>
                    <div class="item-details">
                        <p><strong>Quantit√©:</strong> ${item.quantity}</p>
                        ${item.location ? `<p><strong>Emplacement:</strong> ${item.location}</p>` : ''}
                        ${item.notes ? `<p><strong>Notes:</strong> ${item.notes}</p>` : ''}
                        <p><strong>Ajout√© le:</strong> ${item.dateAdded}</p>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-secondary" onclick="editItem(${item.id})" style="margin-right: 10px;">Modifier</button>
                        <button class="btn btn-danger" onclick="deleteItem(${item.id})">Supprimer</button>
                    </div>
                </div>
            `).join('');
        }

        // Update stats
        function updateStats() {
            document.getElementById('totalItems').textContent = inventory.length;
            const uniqueCategories = [...new Set(inventory.map(item => item.category))];
            document.getElementById('totalCategories').textContent = categories.length;
        }

        // Show/hide auth error
        function showAuthError(message) {
            const errorDiv = document.getElementById('authError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function hideAuthError() {
            document.getElementById('authError').style.display = 'none';
        }

        // Photo modal functions
        function openPhotoModal(photoSrc) {
            event.stopPropagation();
            const modal = document.getElementById('photoModal');
            const modalImg = document.getElementById('photoModalImg');
            modalImg.src = photoSrc;
            modal.classList.add('active');
        }

        function closePhotoModal() {
            const modal = document.getElementById('photoModal');
            modal.classList.remove('active');
        }

        // Settings functions
        function openSettings() {
            // Populate settings form
            document.getElementById('primaryColor').value = settings.primaryColor;
            document.getElementById('secondaryColor').value = settings.secondaryColor;
            document.getElementById('enableAlerts').checked = settings.enableAlerts;
            document.getElementById('alertThreshold').value = settings.alertThreshold;
            
            document.getElementById('settingsModal').classList.add('active');
        }

        function closeSettings() {
            document.getElementById('settingsModal').classList.remove('active');
        }

        async function saveSettings() {
            settings.primaryColor = document.getElementById('primaryColor').value;
            settings.secondaryColor = document.getElementById('secondaryColor').value;
            settings.enableAlerts = document.getElementById('enableAlerts').checked;
            settings.alertThreshold = parseInt(document.getElementById('alertThreshold').value);
            
            await saveTeamData();
            applyTheme();
            checkLowStock();
            closeSettings();
            showNotification('R√©glages enregistr√©s !');
        }

        function setThemePreset(primary, secondary) {
            document.getElementById('primaryColor').value = primary;
            document.getElementById('secondaryColor').value = secondary;
        }

        function applyTheme() {
            const root = document.documentElement;
            root.style.setProperty('--primary-color', settings.primaryColor);
            root.style.setProperty('--secondary-color', settings.secondaryColor);
            
            // Update all gradients
            document.querySelectorAll('.header, .stat-card, .btn-primary').forEach(el => {
                el.style.background = `linear-gradient(135deg, ${settings.primaryColor} 0%, ${settings.secondaryColor} 100%)`;
            });
            
            document.querySelectorAll('.item-category, .category-badge').forEach(el => {
                el.style.background = settings.primaryColor;
            });
            
            document.querySelectorAll('.filter-btn.active, .filter-btn:hover').forEach(el => {
                el.style.background = settings.primaryColor;
            });
        }

        function checkLowStock() {
            const alertsContainer = document.getElementById('lowStockAlerts');
            
            if (!settings.enableAlerts) {
                alertsContainer.innerHTML = '';
                return;
            }
            
            const lowStockItems = inventory.filter(item => item.quantity <= settings.alertThreshold);
            
            if (lowStockItems.length === 0) {
                alertsContainer.innerHTML = '';
                return;
            }
            
            alertsContainer.innerHTML = `
                <div class="low-stock-warning">
                    <strong>‚ö†Ô∏è Alerte stock bas (${lowStockItems.length} article${lowStockItems.length > 1 ? 's' : ''})</strong><br>
                    ${lowStockItems.map(item => `
                        <div style="margin-top: 8px;">
                            ‚Ä¢ <strong>${item.name}</strong> (${item.category}) - Quantit√©: ${item.quantity}
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function exportData() {
            const data = {
                teamName: currentUser.teamName,
                exportDate: new Date().toISOString(),
                inventory: inventory,
                categories: categories
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `inventaire_${currentUser.teamName}_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            showNotification('Export r√©ussi !');
        }

        // Notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #667eea;
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
